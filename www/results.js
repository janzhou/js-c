//画图模块
//性能开销比较大
//不停画图

function new_result(){
result = [
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	],
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	],
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	],
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	],
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	],
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	],
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	],
	[
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
		[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
	]
];

return result;
};

results = new Array;

results['iops'] = new_result();
results['readspeed'] = new_result();
results['writespeed'] = new_result();
results['readiops'] = new_result();
results['writeiops'] = new_result();

draw_do = 0;

function draw(){
	if(!draw_do) return;
	
	setTimeout('draw()', interval);
	
	$('#chart').empty();

    var plot1 = $.jqplot('chart', results[$("#draw-result").val()][$("#draw-machine").val()][$("#draw-disk").val()], {
        title: 'Machine '+$("#draw-machine").val()+' Disk '+$("#draw-disk").val(),
    });
}

function startdraw(){
	if(draw_do) return;
	draw_do = 1;
	draw();
}

function stopdraw(){
	$('#result-start').unbind();
	draw_do = 0;
	setTimeout('$("#result-start").click(startdraw);', interval);
}

$(document).ready(function(){
	$('#result-start').click(startdraw);
	$('#result-stop').click(stopdraw);
	startdraw();
});
